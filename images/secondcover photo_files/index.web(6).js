// {"framework" : "Rax"}
!function(e){if("function"==typeof define)define("aemod/ae-pc-promoteCoupons/index.web",["rat-frame","rat-view","rat-picture","rat-text","rat-slider"],function(require,exports,module){module.exports=e(require("rat-frame"),require("rat-view"),require("rat-picture"),require("rat-text"),require("rat-slider"))});else if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e(require("rat-frame"),require("rat-view"),require("rat-picture"),require("rat-text"),require("rat-slider"));else{var t;(t="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:this).AePcPromoteCoupons=e(t["rat-frame"],t["rat-view"],t["rat-picture"],t["rat-text"],t["rat-slider"])}}(function(e,t,o,n,r){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var module=t[n]={i:n,l:!1,exports:{}};return e[n].call(module.exports,module,module.exports,o),module.l=!0,module.exports}return o.m=e,o.c=t,o.d=function(exports,e,t){o.o(exports,e)||Object.defineProperty(exports,e,{enumerable:!0,get:t})},o.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(module){var e=module&&module.__esModule?function(){return module.default}:function(){return module};return o.d(e,"a",e),e},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=41)}([function(module,exports){module.exports=e},function(module,exports){module.exports=t},function(module,exports,e){module.exports=!e(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(module,exports){module.exports=o},function(module,exports){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};module.exports=function(t){return"object"===(void 0===t?"undefined":e(t))?null!==t:"function"==typeof t}},function(module,exports){exports.__esModule=!0,exports.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(module,exports,e){exports.__esModule=!0;var t,o=e(17),n=(t=o)&&t.__esModule?t:{default:t};exports.default=function(){function e(e,t){for(var o,r=0;r<t.length;r++)(o=t[r]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,n.default)(e,o.key,o)}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}()},function(module,exports){var e=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(module,exports){var e=module.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},function(module,exports,e){var t=e(24),o=e(25),n=e(27),r=Object.defineProperty;exports.f=e(2)?Object.defineProperty:function(e,i,a){if(t(e),i=n(i,!0),t(a),o)try{return r(e,i,a)}catch(e){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(e[i]=a.value),e}},function(module,exports){module.exports=function(e){try{return!!e()}catch(e){return!0}}},function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var e={},t=decodeURIComponent,o=encodeURIComponent;function n(e){return"string"==typeof e}function r(e){return n(e)&&""!==e}function i(e){if(!r(e))throw new TypeError("Cookie name must be a non-empty string")}function a(e){return e}e.get=function(e,o){i(e),o="function"==typeof o?{converter:o}:o||{};var r=function(e,o){var r={};if(n(e)&&e.length>0)for(var i=o?t:a,s=e.split(/;\s/g),u=void 0,c=void 0,l=void 0,p=0,d=s.length;p<d;p++){if((l=s[p].match(/([^=]+)=/i))instanceof Array)try{u=t(l[1]),c=i(s[p].substring(l[1].length+1))}catch(e){}else u=t(s[p]),c="";u&&(r[u]=c)}return r}(document.cookie,!o.raw);return(o.converter||a)(r[e])},e.set=function(e,t,n){i(e);var a=(n=n||{}).expires,s=n.domain,u=n.path;n.raw||(t=o(t+""));var c=e+"="+t,l=a;return"number"==typeof l&&(l=new Date).setDate(l.getDate()+a),l instanceof Date&&(c+="; expires="+l.toUTCString()),r(s)&&(c+="; domain="+s),r(u)&&(c+="; path="+u),n.secure&&(c+="; secure"),document.cookie=c,c},e.remove=function(e,t){return(t=t||{}).expires=new Date(0),this.set(e,"",t)},exports.default=e},function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var e="aliexpress.com";[{reg:/aliexpress.ru/,domain:"aliexpress.ru"},{reg:/tmall.ru/,domain:"tmall.ru"}].forEach(function(t){t.reg.test(window.location.host)&&(e=t.domain)}),exports.getFixedDomainUrl=function(){return e}},function(module,exports,e){var t=e(14);function o(e){var t=decodeURI(window.location.href),o=new RegExp("("+e+"=)(.*?)([;&]|$)");return t.match(o)?t.match(o)[2]:""}window.lib&&window.lib.mtop||e(31),module.exports=function(){if(window.lib&&window.lib.mtop){var e={},n="acs",r=o("_mtopPrev_");"_true_"===r?n="pre-acs":r&&/(.*-)?pre-acs$/.test(r)&&(n=r);var i=t.isRU(),a=o("_projectTag_"),s=o("_dpath_");return e.request=function(e,t,o){return window.lib.mtop.config.prefix=n,window.lib.mtop.config.subDomain="",window.lib.mtop.config.H5Request=!0,window.lib.mtop.config.mainDomain=i?"aliexpress.ru":"aliexpress.com",e&&!e.appKey&&(e.appKey=24815441),a&&(e.tb_eagleeyex_scm_project=a),s&&(e.tb_eagleeyex_dpath_env=s),lib.mtop.request(e,t,o)},window.lib.Mtop=e,e}console.error("window.lib.mtop undefined!")}()},function(module,exports){var e=[{reg:/www.aliexpress.com/,originDomain:"www.aliexpress.com",targetDomain:"www.aliexpress.ru"},{reg:/tmall.aliexpress.com/,originDomain:"tmall.aliexpress.com",targetDomain:"tmall.ru"},{reg:/login.tmall.com/,originDomain:"login.tmall.com",targetDomain:"login.tmall.ru"},{reg:/login.aliexpress.com/,originDomain:"login.aliexpress.com",targetDomain:"login.aliexpress.ru"},{reg:/accounts.tmall.com/,originDomain:"accounts.tmall.com",targetDomain:"accounts.tmall.ru"},{reg:/accounts.aliexpress.com/,originDomain:"accounts.aliexpress.com",targetDomain:"accounts.aliexpress.ru"},{reg:/passport.aliexpress.com/,originDomain:"passport.aliexpress.com",targetDomain:"passport.aliexpress.ru"},{reg:/msg.aliexpress.com/,originDomain:"msg.aliexpress.com",targetDomain:"msg.aliexpress.ru"},{reg:/message.aliexpress.com/,originDomain:"message.aliexpress.com",targetDomain:"message.aliexpress.ru"},{reg:/trade.aliexpress.com/,originDomain:"trade.aliexpress.com",targetDomain:"trade.aliexpress.ru"},{reg:/home.aliexpress.com/,originDomain:"home.aliexpress.com",targetDomain:"home.aliexpress.ru"},{reg:/feedback.aliexpress.com/,originDomain:"feedback.aliexpress.com",targetDomain:"feedback.aliexpress.ru"},{reg:/coupon.aliexpress.com/,originDomain:"coupon.aliexpress.com",targetDomain:"coupon.aliexpress.ru"},{reg:/report.aliexpress.com/,originDomain:"report.aliexpress.com",targetDomain:"report.aliexpress.ru"},{reg:/ilogisticsaddress.aliexpress.com/,originDomain:"ilogisticsaddress.aliexpress.com",targetDomain:"ilogisticsaddress.aliexpress.ru"},{reg:/my.aliexpress.com/,originDomain:"my.aliexpress.com",targetDomain:"my.aliexpress.ru"},{reg:/best.aliexpress.com/,originDomain:"best.aliexpress.com",targetDomain:"best.aliexpress.ru"},{reg:/mbest.aliexpress.com/,originDomain:"mbest.aliexpress.com",targetDomain:"mbest.aliexpress.ru"},{reg:/s.click.aliexpress.com/,originDomain:"s.click.aliexpress.com",targetDomain:"s.click.aliexpress.ru"},{reg:/sale.aliexpress.com/,originDomain:"sale.aliexpress.com",targetDomain:"sale.aliexpress.ru"},{reg:/ilogisticsaddress.tmall.com/,originDomain:"ilogisticsaddress.tmall.com",targetDomain:"ilogisticsaddress.tmall.ru"},{reg:/freight.aliexpress.com/,originDomain:"freight.aliexpress.com",targetDomain:"freight.aliexpress.ru"},{reg:/m.aliexpress.com/,originDomain:"m.aliexpress.com",targetDomain:"m.aliexpress.ru"},{reg:/shoppingcart.aliexpress.com/,originDomain:"shoppingcart.aliexpress.com",targetDomain:"shoppingcart.aliexpress.ru"}],t=[{reg:/gpsfront.aliexpress.com/,originDomain:"aliexpress.com",targetDomain:"aliexpress.ru"},{reg:/cdp.aliexpress.com/,originDomain:"aliexpress.com",targetDomain:"aliexpress.ru"},{reg:/sale.aliexpress.com/,originDomain:"aliexpress.com",targetDomain:"aliexpress.ru"},{reg:/ilogisticsaddress.aliexpress.com/,originDomain:"aliexpress.com",targetDomain:"aliexpress.ru"},{reg:/freight.aliexpress.com/,originDomain:"aliexpress.com",targetDomain:"aliexpress.ru"},{reg:/feedback.aliexpress.com/,originDomain:"aliexpress.com",targetDomain:"aliexpress.ru"},{reg:/ru.aliexpress.com/,originDomain:"ru.aliexpress.com",targetDomain:"aliexpress.ru"},{reg:/my.aliexpress.com\/wishlist/,originDomain:"aliexpress.com",targetDomain:"aliexpress.ru"},{reg:/promotion.aliexpress.com/,originDomain:"aliexpress.com",targetDomain:"aliexpress.ru"},{reg:/connectkeyword.aliexpress.com/,originDomain:"aliexpress.com",targetDomain:"aliexpress.ru"},{reg:/best.aliexpress.com/,originDomain:"aliexpress.com",targetDomain:"aliexpress.ru"}];function o(){return!!/aliexpress.ru/.test(window.location.host)}function n(t,n){for(var r,i=t,a=!1,s=n||e,u=0;u<s.length;u++)if(s[u].reg.test(t)){a=!0,r=s[u];break}return o()&&a&&(i=function(e,t,o){if("string"!=typeof e)return e;if(-1!==e.split("?")[0].indexOf("aliexpress.ru"))return e;if(-1!==e.split("?")[0].indexOf("pg-ru.aliexpress.com"))return e;var n=new RegExp("(.*?)(".concat(t,")(.*\\?)?(.*)"));return e.replace(n,function(e,n,r,i,a){return n+(o||t)+(i||"")+a})}(t,r.originDomain,r.targetDomain)),i}module.exports={switchRequestURL:function(e){return n(e,t)},switchLinkURL:function(e){return n(e)},switchUrl:n,isRU:o}},function(module,exports){module.exports=n},function(module,exports,e){Object.defineProperty(exports,"__esModule",{value:!0});var t=a(e(5)),o=a(e(6)),n=a(e(11)),r=a(e(30)),i=e(12);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){(0,t.default)(this,e),this.siteFormat=/^[a-z]{3}(_[a-z]{1})?$/,this.x_localeFormat=/^[a-z]{2}_[A-Z]{2}$/,this.s_localeFormat=/^[a-z]{2}_[A-Z]{2}$/,this.b_localeFormat=/^[a-z]{2}_[A-Z]{2}$/,this.c_tpFormat=/^[A-Z]{3}$/,this.regionFormat=/^[A-Z]{2,3}$/,this.provinceFormat=/^[0-9]{18}$/,this.cityFormat=/^[0-9]{18}$/,this.siFormat=/^(glo|rus|bra|esp|idn|fra|deu|ita)$/,this.signFormat=/^(y|n)$/,this.x_userFormat=/^.*$/,this.issFormat=/^(y)$/,this.isbFormat=/^(y)$/,this.ispmFormat=/^(y)$/,this.isksFormat=/^(y)$/,this.isgclFormat=/^(y)$/,this.reg_verFormat=/^(new|old)$/,this.x_lFormat=/^[01]{1}$/,this.ber_lFormat=/^A\d$/,this.zero_orderFormat=/^(y)$/,this.ae_u_p_sFormat=/^[012]{1}$/,this.ups_u_tFormat=/^[0-9]{13,}$/,this.x_csrfFormat=/^.*$/,this.x_c_chgFormat=/^[01]{1}$/,this.x_c_syncedFormat=/^[01]{1}$/,this.acs_rtFormat=/^[A-Za-z0-9]+$/,this.alimidFormat=/^[0-9]+$/,this.x_as_iFormat=/^([A-Za-z0-9]|(%))+/}return(0,o.default)(e,[{key:"get",value:function(e,t){return n.default.get(e,t)}},{key:"_setcookie",value:function(e,t,o){if(o&&!this.validate(t,o))return!1;var r=n.default.get(e,{domain:(0,i.getFixedDomainUrl)(),path:"/",raw:!0})||"";r=new RegExp("(.*&?"+t+"=)(.*?)(&.*|$)").test(r)?RegExp.$1+o+RegExp.$3:(r?r+"&":"")+t+"="+o,n.default.set(e,r,{domain:(0,i.getFixedDomainUrl)(),path:"/",expires:3650,raw:!0})}},{key:"_getCookie",value:function(e,t){var o=n.default.get(e,{domain:(0,i.getFixedDomainUrl)(),path:"/",raw:!0})||"",r=new RegExp("(.*&?"+t+"=)(.*?)(&.*|$)");o.match(r);var a=RegExp.$2;return r.test(o)&&this.validate(t,a)?a:""}},{key:"validate",value:function(e,t){return!/(&|=)/.test(t)&&!!(t&&this[e+"Format"]&&this[e+"Format"].test(t))}},{key:"getMSite",value:function(e,t){var o=n.default.get(e,{domain:"m.aliexpress.com",path:"/",raw:!0})||"",r=new RegExp("(.*&?"+t+"=)(.*?)(&.*|$)");o.match(r);var i=RegExp.$2;return r.test(o)&&this.validate(t,i)?i:""}},{key:"setSite",value:function(e){this._setcookie("aep_usuc_f","site",e)}},{key:"getSite",value:function(){return this._getCookie("aep_usuc_f","site")}},{key:"setRegion",value:function(e){this._setcookie("aep_usuc_f","region",e)}},{key:"getRegion",value:function(){return this._getCookie("aep_usuc_f","region")}},{key:"setProvince",value:function(e){this._setcookie("aep_usuc_f","province",e)}},{key:"getProvince",value:function(){return this._getCookie("aep_usuc_f","province")}},{key:"setCity",value:function(e){this._setcookie("aep_usuc_f","city",e)}},{key:"getCity",value:function(){return this._getCookie("aep_usuc_f","city")}},{key:"getAlimid",value:function(){return this._getCookie("aep_usuc_f","alimid")}},{key:"getMsiteProvince",value:function(){return n.default.get("ae-msite-province",{domain:(0,i.getFixedDomainUrl)(),path:"/",raw:!0})||""}},{key:"getMsiteCity",value:function(){return n.default.get("ae-msite-city",{domain:(0,i.getFixedDomainUrl)(),path:"/",raw:!0})||""}},{key:"setCurrency",value:function(e){this._setcookie("aep_usuc_f","c_tp",e)}},{key:"getCurrency",value:function(){return this._getCookie("aep_usuc_f","c_tp")}},{key:"setLocale",value:function(e){this._setcookie("xman_us_f","x_locale",e)}},{key:"getLocale",value:function(){return this._getCookie("xman_us_f","x_locale")}},{key:"setSellerLocale",value:function(e){n.default.set("intl_locale",e,{domain:i.getFixedDomainUrl,path:"/",expires:365,raw:!0}),this.setLocale(e),this._setcookie("aep_usuc_f","s_locale",e)}},{key:"getSellerLocale",value:function(){return this._getCookie("aep_usuc_f","s_locale")}},{key:"setBuyerLocale",value:function(e){this.setLocale(e),this._setcookie("aep_usuc_f","b_locale",e)}},{key:"getBuyerLocale",value:function(){return this._getCookie("aep_usuc_f","b_locale")}},{key:"getSign",value:function(){return this._getCookie("xman_us_t","sign")}},{key:"isLoggedIn",value:function(){return"y"==this.getSign()}},{key:"getIss",value:function(){return this._getCookie("aep_usuc_f","iss")}},{key:"isSeller",value:function(){return"y"===this.getIss()}},{key:"getIsb",value:function(){return this._getCookie("aep_usuc_f","isb")}},{key:"isBuyer",value:function(){return"y"===this.getIsb()}},{key:"getIsks",value:function(){return this._getCookie("aep_usuc_f","isks")}},{key:"isKaSeller",value:function(){return"y"===this.getIsks()}},{key:"getIsgcl",value:function(){return this._getCookie("aep_usuc_f","isgcl")}},{key:"isGreenChannel",value:function(){return"y"===this.getIsgcl()}},{key:"getIspm",value:function(){return this._getCookie("aep_usuc_f","ispm")}},{key:"isPremiumMember",value:function(){return"y"===this.getIspm()}},{key:"getIsfm",value:function(){return this._getCookie("aep_usuc_f","isfm")}},{key:"isFreeMember",value:function(){return"y"===this.getIsfm()}},{key:"getRegVer",value:function(){return this._getCookie("aep_usuc_f","reg_ver")}},{key:"getOversea",value:function(){return this._getCookie("xman_us_f","x_l")}},{key:"isOversea",value:function(){return"1"!==this.getOversea()}},{key:"_getXUserRaw",value:function(){return this._getCookie("xman_us_f","x_user")}},{key:"getXUserObj",value:function(){var e={country:"",firstName:"",lastName:"",memberSeq:""},t=(this._getXUserRaw()||"").split("|");return t.length>=5&&(e.country=t[0],e.firstName=t[1].replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.lastName=t[2].replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.memberSeq=t[4]),e}},{key:"getMemberSeq",value:function(){return this.getXUserObj().memberSeq}},{key:"isNewUser",value:function(){return""===this.getXUserObj().memberSeq}},{key:"setHistory",value:function(e){e&&r.default.logProduct({id:e})}},{key:"getHistory",value:function(){return r.default.getProducts()}},{key:"setAETest",value:function(){}},{key:"getAETest",value:function(){return""}},{key:"getBerL",value:function(){return this._getCookie("aep_usuc_t","ber_l")}},{key:"getZeroOrder",value:function(){return this._getCookie("xman_us_f","zero_order")}},{key:"isZeroOrderUser",value:function(){return"y"===this.getZeroOrder()}},{key:"getAeUps",value:function(){return this._getCookie("aep_usuc_f","ae_u_p_s")}},{key:"setAeUps",value:function(e){return this._setcookie("aep_usuc_f","ae_u_p_s",e)}},{key:"getAeUpsTime",value:function(){return this._getCookie("aep_usuc_f","ups_u_t")}},{key:"setAeUpsTime",value:function(e){return this._setcookie("aep_usuc_f","ups_u_t",e)}},{key:"getCsrfToken",value:function(){var e=this._getCookie("acs_usuc_t","x_csrf");return e||(window.__bl&&window.__bl.api?window.__bl.error(new Error("Cookie.getCsrfToken error")):window.__bl&&(window.__bl.pipe=window.__bl.pipe||[],window.__bl.pipe.push(["error",new Error("Cookie.getCsrfToken error")]))),e}},{key:"getXmanCookieChanged",value:function(){return this._getCookie("xman_us_f","x_c_chg")}},{key:"setXmanCookieChanged",value:function(e){return this._setcookie("xman_us_f","x_c_chg",""+e)}},{key:"getXmanCookieSynced",value:function(){return this._getCookie("xman_us_f","x_c_synced")}},{key:"setXmanCookieSynced",value:function(e){return this._setcookie("xman_us_f","x_c_synced",""+e)}},{key:"getACS_RT",value:function(){return this._getCookie("xman_us_f","acs_rt")}},{key:"getX_AS_I",value:function(){return this._getCookie("xman_us_f","x_as_i")}},{key:"getCNA",value:function(){return n.default.get("cna",{domain:(0,i.getFixedDomainUrl)(),path:"/",raw:!0})||""}}]),e}();exports.default=new s},function(module,exports,e){module.exports={default:e(18),__esModule:!0}},function(module,exports,e){e(19);var t=e(8).Object;module.exports=function(e,o,n){return t.defineProperty(e,o,n)}},function(module,exports,e){var t=e(20);t(t.S+t.F*!e(2),"Object",{defineProperty:e(9).f})},function(module,exports,e){var t=e(7),o=e(8),n=e(21),r=e(23),i=e(29),a=function(e,s,u){var c,l,p,d=e&a.F,f=e&a.G,m=e&a.S,g=e&a.P,_=e&a.B,h=e&a.W,exports=f?o:o[s]||(o[s]={}),y=exports.prototype,v=f?t:m?t[s]:(t[s]||{}).prototype;for(c in f&&(u=s),u)(l=!d&&v&&void 0!==v[c])&&i(exports,c)||(p=l?v[c]:u[c],exports[c]=f&&"function"!=typeof v[c]?u[c]:_&&l?n(p,t):h&&v[c]==p?function(e){var t=function(t,o,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,o)}return new e(t,o,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(p):g&&"function"==typeof p?n(Function.call,p):p,g&&((exports.virtual||(exports.virtual={}))[c]=p,e&a.R&&y&&!y[c]&&r(y,c,p)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,module.exports=a},function(module,exports,e){var t=e(22);module.exports=function(e,o,n){return t(e),void 0===o?e:1===n?function(t){return e.call(o,t)}:2===n?function(t,n){return e.call(o,t,n)}:3===n?function(t,n,r){return e.call(o,t,n,r)}:function(){return e.apply(o,arguments)}}},function(module,exports){module.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(module,exports,e){var t=e(9),o=e(28);module.exports=e(2)?function(e,n,r){return t.f(e,n,o(1,r))}:function(e,t,o){return e[t]=o,e}},function(module,exports,e){var t=e(4);module.exports=function(e){if(!t(e))throw TypeError(e+" is not an object!");return e}},function(module,exports,e){module.exports=!e(2)&&!e(10)(function(){return 7!=Object.defineProperty(e(26)("div"),"a",{get:function(){return 7}}).a})},function(module,exports,e){var t=e(4),o=e(7).document,n=t(o)&&t(o.createElement);module.exports=function(e){return n?o.createElement(e):{}}},function(module,exports,e){var t=e(4);module.exports=function(e,o){if(!t(e))return e;var n,r;if(o&&"function"==typeof(n=e.toString)&&!t(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!t(r=n.call(e)))return r;if(!o&&"function"==typeof(n=e.toString)&&!t(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(module,exports){module.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(module,exports){var e={}.hasOwnProperty;module.exports=function(t,o){return e.call(t,o)}},function(module,exports,e){Object.defineProperty(exports,"__esModule",{value:!0});var t=i(e(5)),o=i(e(6)),n=i(e(11)),r=e(12);function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){(0,t.default)(this,e),this.keywordsSize=8,this.productsSize=8,this.groups={},this.refresh()}return(0,o.default)(e,[{key:"getKeywords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.groups||!this.groups.keywords)return[];var t=e.limit||0;return this._sliceArray(this.groups.keywords,t).slice(0)}},{key:"getProducts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.groups||!this.groups.product_selloffer)return[];for(var t,o=e.limit||0,n=this._sliceArray(this.groups.product_selloffer,o),r=[],i=0,a=n.length;i<a;i++)t=n[i].replace(/^http(s)?:\/\/.*\/(\d+_)?|\.html.*$/gi,""),/^\d+$/.test(t)&&r.push(t);return r}},{key:"logProduct",value:function(e){if(e&&e.id){var t=this._addItem({array:this.getProducts(),item:e.id,maxSize:this.productsSize}),o=this._buildWholeCookie({keywordArray:this.getKeywords(),productArray:t});n.default.set("aep_history",o,{domain:(0,r.getFixedDomainUrl)(),path:"/",expires:365}),this.refresh()}}},{key:"refresh",value:function(){this.groups=this._parseGroups()}},{key:"_buildWholeCookie",value:function(e){var t=e.keywordArray||[],o=e.productArray||[];return this._buildGroup({group:"keywords",array:t.reverse()})+"\n\n"+this._buildGroup({group:"product_selloffer",array:o.reverse()})}},{key:"_buildGroup",value:function(e){var t=e.group||"",o=e.array||[];return!t||t.length<=0?"":t+"^\n"+t+"\t"+o.join("\t")}},{key:"_addItem",value:function(e){var t=e.array||[],o=e.item||"",n=e.maxSize||"";if(!o||o.length<=0)return t;var r=t.slice(0);return r=r.reverse(),this._appendToArray(o,r),r=r.reverse().splice(0,n)}},{key:"_appendToArray",value:function(e,t){if(Array.isArray(t)){var o=t.indexOf(e);o>=0&&t.splice(o,1),t.push(e)}}},{key:"_sliceArray",value:function(e,t){return t>0?e.splice(0,t):e}},{key:"_parseGroups",value:function(){var e={},t=n.default.get("aep_history",{domain:(0,r.getFixedDomainUrl)(),path:"/"});if(t)for(var o=t.split("\n\n"),i=0,a=o.length;i<a;i++){var s=o[i].split("^\n"),u=s[0],c=s[1],l=this._parseGroupContent(u,c);e[u]=l}return e}},{key:"_parseGroupContent",value:function(e,t){if(!t||0===t.length)return[];var o=t.indexOf(e);o>=0&&(t=t.substring(o+e.length+"\t".length));var n=t.split("\t");return n=n.reverse(),n=this._uniqueArray(n)}},{key:"_uniqueArray",value:function(e){for(var t=e,o=1;o<t.length;o++)t[o]===t[o-1]&&t.splice(o--,1);return t}}]),e}();exports.default=new a},function(module,exports){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};"undefined"==typeof window&&(window={ctrl:{},lib:{}}),window.ctrl||(window.ctrl={}),window.lib||(window.lib={}),function(t,o){function n(){var e={},t=new d(function(t,o){e.resolve=t,e.reject=o});return e.promise=t,e}function r(e,t){for(var o in t)void 0===e[o]&&(e[o]=t[o]);return e}function i(e){var t=[];for(var o in e)e[o]&&t.push(o+"="+encodeURIComponent(e[o]));return t.join("&")}function a(e){return"[object Object]"=={}.toString.call(e)}function s(e){var t=new RegExp("(?:^|;\\s*)"+e+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return t?t[1]:void 0}function u(e,t,o){var n=new Date;n.setTime(n.getTime()-864e5);document.cookie=e+"=;path=/;domain=."+t+";expires="+n.toGMTString(),document.cookie=e+"=;path=/;domain=."+o+"."+t+";expires="+n.toGMTString()}function c(e,t){function o(e){for(var t,o=(e=(e||0).toString()).split("."),n=["","0","00","000","0000"].reverse(),r=0;r<o.length;r++)t=o[r].length,o[r]=n[t]+o[r];return o.join("")}var n=o(e),r=o(t);return n==r?0:n>r?1:r>n?-1:void 0}function l(t){this.id=""+(new Date).getTime()+ ++v,this.params=r(t||{},{v:"*",data:{},type:"get",dataType:"jsonp"}),this.params.type=this.params.type.toLowerCase(),"object"==e(this.params.data)&&(this.params.data=JSON.stringify(this.params.data)),this.middlewares=g.slice(0)}var p=String.prototype,d=t.Promise,f=(d||{resolve:function(){}}).resolve();p.trim||(p.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});var m={useJsonpResultType:!1,safariGoLogin:!0,useAlipayJSBridge:!1},g=[],_={ERROR:-1,SUCCESS:0,TOKEN_EXPIRED:1,SESSION_EXPIRED:2};(function(){var e=t.location.hostname;if(!e){var o=t.parent.location.hostname;o&&~o.indexOf("zebra.alibaba-inc.com")&&(e=o)}var n=new RegExp("([^.]*?)\\.?((?:"+["taobao.net","taobao.com","tmall.com","tmall.hk","alibaba-inc.com"].join(")|(?:").replace(/\./g,"\\.")+"))","i"),r=e.match(n)||[],i=r[2]||"taobao.com",a=r[1]||"m";"taobao.net"!==i||"x"!==a&&"waptest"!==a&&"daily"!==a?"taobao.net"===i&&"demo"===a?a="demo":"alibaba-inc.com"===i&&"zebra"===a?a="zebra":"waptest"!=a&&"wapa"!=a&&"m"!=a&&(a="m"):a="waptest";var s="h5api";"taobao.net"===i&&"waptest"===a&&(s="acs"),m.mainDomain=i,m.subDomain=a,m.prefix=s})(),function(){var e=t.navigator.userAgent,o=e.match(/WindVane[\/\s]([\d\.\_]+)/);o&&(m.WindVaneVersion=o[1]);var n=e.match(/AliApp\(([^\/]+)\/([\d\.\_]+)\)/i);n&&(m.AliAppName=n[1],m.AliAppVersion=n[2]);var r=e.match(/AMapClient\/([\d\.\_]+)/i);r&&(m.AliAppName="AMAP",m.AliAppVersion=r[1])}();var h=/[Android|Adr]/.test(t.navigator.userAgent),y="AP"===m.AliAppName&&c(m.AliAppVersion,"10.1.2")>=0||"KB"===m.AliAppName&&c(m.AliAppVersion,"7.1.62")>=0||h&&"AMAP"===m.AliAppName&&c(m.AliAppVersion,"1.0.1")>=0,v=0;l.prototype.use=function(e){if(!e)throw new Error("middleware is undefined");return this.middlewares.push(e),this},l.prototype.__processRequestMethod=function(e){var t=this.params,o=this.options;"get"===t.type&&"jsonp"===t.dataType?o.getJSONP=!0:"get"===t.type&&"originaljsonp"===t.dataType?o.getOriginalJSONP=!0:"get"===t.type&&"json"===t.dataType?o.getJSON=!0:"post"===t.type&&(o.postJSON=!0),e()},l.prototype.__processRequestType=function(e){var n=this,r=this.params,i=this.options;if(!0===m.H5Request&&(i.H5Request=!0),!0===m.WindVaneRequest&&(i.WindVaneRequest=!0),!1===i.H5Request&&!0===i.WindVaneRequest){if(!y&&(!o.windvane||parseFloat(i.WindVaneVersion)<5.4))throw new Error("WINDVANE_NOT_FOUND::缺少WindVane环境");if(y&&!t.AlipayJSBridge)throw new Error("ALIPAY_NOT_READY::支付宝通道未准备好，支付宝请见 https://lark.alipay.com/mtbsdkdocs/mtopjssdkdocs/pucq6z")}else if(!0===i.H5Request)i.WindVaneRequest=!1;else if(void 0===i.WindVaneRequest&&void 0===i.H5Request&&(o.windvane&&parseFloat(i.WindVaneVersion)>=5.4?(i.WindVaneRequest=!0,window.self!==window.top&&(i.H5Request=!0)):i.H5Request=!0,y)){if(i.WindVaneRequest=i.H5Request=void 0,t.AlipayJSBridge)if(a(r.data))i.WindVaneRequest=!0;else try{a(JSON.parse(r.data))?i.WindVaneRequest=!0:i.H5Request=!0}catch(e){i.H5Request=!0}else i.H5Request=!0;"AMAP"!==m.AliAppName||r.useNebulaJSbridgeWithAMAP||(i.WindVaneRequest=i.H5Request=void 0,i.H5Request=!0)}var s=t.navigator.userAgent.toLowerCase();return s.indexOf("youku")>-1&&i.mainDomain.indexOf("youku.com")<0&&(i.WindVaneRequest=!1,i.H5Request=!0),i.mainDomain.indexOf("youku.com")>-1&&s.indexOf("youku")<0&&(i.WindVaneRequest=!1,i.H5Request=!0),e?e().then(function(){var e=i.retJson.ret;if(e instanceof Array&&(e=e.join(",")),!0===i.WindVaneRequest&&y&&i.retJson.error||!e||e.indexOf("PARAM_PARSE_ERROR")>-1||e.indexOf("HY_FAILED")>-1||e.indexOf("HY_NO_HANDLER")>-1||e.indexOf("HY_CLOSED")>-1||e.indexOf("HY_EXCEPTION")>-1||e.indexOf("HY_NO_PERMISSION")>-1){if(!y||!isNaN(i.retJson.error)||-1!==i.retJson.error.indexOf("FAIL_SYS_ACCESS_DENIED"))return y&&a(r.data)&&(r.data=JSON.stringify(r.data)),m.H5Request=!0,n.__sequence([n.__processRequestType,n.__processToken,n.__processRequestUrl,n.middlewares,n.__processRequest]);void 0===i.retJson.api&&void 0===i.retJson.v&&(i.retJson.api=r.api,i.retJson.v=r.v,i.retJson.ret=[i.retJson.error+"::"+i.retJson.errorMessage],i.retJson.data={})}}):void 0};var x="_m_h5_c",b="_m_h5_tk";l.prototype.__getTokenFromAlipay=function(){var e=n(),o=this.options,r=(t.navigator.userAgent,!!location.protocol.match(/^https?\:$/));return!0===o.useAlipayJSBridge&&!r&&y&&t.AlipayJSBridge&&t.AlipayJSBridge.call?t.AlipayJSBridge.call("getMtopToken",function(t){t&&t.token&&(o.token=t.token),e.resolve()},function(){e.resolve()}):e.resolve(),e.promise},l.prototype.__getTokenFromCookie=function(){var e=this.options;return e.token=e.CDR&&s(x)?s(x).split(";")[0]:e.token||s(b),e.token&&(e.token=e.token.split("_")[0]),d.resolve()},l.prototype.__waitWKWebViewCookie=function(e){var o=this.options;o.waitWKWebViewCookieFn&&o.H5Request&&t.webkit&&t.webkit.messageHandlers?o.waitWKWebViewCookieFn(e):e()},l.prototype.__processToken=function(e){var t=this,o=this.options;return this.params,o.token&&delete o.token,!0===o.WindVaneRequest?void e():f.then(function(){return t.__getTokenFromAlipay()}).then(function(){return t.__getTokenFromCookie()}).then(e).then(function(){var e=o.retJson,n=e.ret;if(n instanceof Array&&(n=n.join(",")),n.indexOf("TOKEN_EMPTY")>-1||(!0===o.CDR||!0===o.syncCookieMode)&&n.indexOf("ILLEGAL_ACCESS")>-1||n.indexOf("TOKEN_EXOIRED")>-1){if(o.maxRetryTimes=o.maxRetryTimes||5,o.failTimes=o.failTimes||0,o.H5Request&&++o.failTimes<o.maxRetryTimes){var r=[t.__waitWKWebViewCookie,t.__processToken,t.__processRequestUrl,t.middlewares,t.__processRequest];if(!0===o.syncCookieMode&&t.constructor.__cookieProcessorId!==t.id)if(t.constructor.__cookieProcessor){r=[function(e){var o=function(){t.constructor.__cookieProcessor=null,t.constructor.__cookieProcessorId=null,e()};t.constructor.__cookieProcessor?t.constructor.__cookieProcessor.then(o).catch(o):e()},t.__waitWKWebViewCookie,t.__processToken,t.__processRequestUrl,t.middlewares,t.__processRequest]}else t.constructor.__cookieProcessor=t.__requestProcessor,t.constructor.__cookieProcessorId=t.id;return t.__sequence(r)}o.maxRetryTimes>0&&(u(x,o.pageDomain,"*"),u(b,o.mainDomain,o.subDomain),u("_m_h5_tk_enc",o.mainDomain,o.subDomain)),e.retType=_.TOKEN_EXPIRED}})},l.prototype.__processRequestUrl=function(e){var o=this.params,n=this.options;if(n.hostSetting&&n.hostSetting[t.location.hostname]){var r=n.hostSetting[t.location.hostname];r.prefix&&(n.prefix=r.prefix),r.subDomain&&(n.subDomain=r.subDomain),r.mainDomain&&(n.mainDomain=r.mainDomain)}if(!0===n.H5Request){var i="//"+(n.prefix?n.prefix+".":"")+(n.subDomain?n.subDomain+".":"")+n.mainDomain+"/h5/"+o.api.toLowerCase()+"/"+o.v.toLowerCase()+"/",a=o.appKey||("waptest"===n.subDomain?"4272":"12574478"),s=(new Date).getTime(),u=function(e){function t(e,t){return e<<t|e>>>32-t}function o(e,t){var o,n,r,i,a;return r=2147483648&e,i=2147483648&t,a=(1073741823&e)+(1073741823&t),(o=1073741824&e)&(n=1073741824&t)?2147483648^a^r^i:o|n?1073741824&a?3221225472^a^r^i:1073741824^a^r^i:a^r^i}function n(e,n,r,i,a,s,u){return o(t(e=o(e,o(o(function(e,t,o){return e&t|~e&o}(n,r,i),a),u)),s),n)}function r(e,n,r,i,a,s,u){return o(t(e=o(e,o(o(function(e,t,o){return e&o|t&~o}(n,r,i),a),u)),s),n)}function i(e,n,r,i,a,s,u){return o(t(e=o(e,o(o(function(e,t,o){return e^t^o}(n,r,i),a),u)),s),n)}function a(e,n,r,i,a,s,u){return o(t(e=o(e,o(o(function(e,t,o){return t^(e|~o)}(n,r,i),a),u)),s),n)}function s(e){var t,o="",n="";for(t=0;3>=t;t++)o+=(n="0"+(e>>>8*t&255).toString(16)).substr(n.length-2,2);return o}var u,c,l,p,d,f,m,g,_,h;for(h=function(e){for(var t=e.length,o=t+8,n=16*((o-o%64)/64+1),r=Array(n-1),i=0,a=0;t>a;)i=a%4*8,r[(a-a%4)/4]|=e.charCodeAt(a)<<i,a++;return i=a%4*8,r[(a-a%4)/4]|=128<<i,r[n-2]=t<<3,r[n-1]=t>>>29,r}(e=function(e){var t=String.fromCharCode;e=e.replace(/\r\n/g,"\n");for(var o,n="",r=0;r<e.length;r++)128>(o=e.charCodeAt(r))?n+=t(o):o>127&&2048>o?(n+=t(o>>6|192),n+=t(63&o|128)):(n+=t(o>>12|224),n+=t(o>>6&63|128),n+=t(63&o|128));return n}(e)),f=1732584193,m=4023233417,g=2562383102,_=271733878,u=0;u<h.length;u+=16)c=f,l=m,p=g,d=_,m=a(m=a(m=a(m=a(m=i(m=i(m=i(m=i(m=r(m=r(m=r(m=r(m=n(m=n(m=n(m=n(m,g=n(g,_=n(_,f=n(f,m,g,_,h[u+0],7,3614090360),m,g,h[u+1],12,3905402710),f,m,h[u+2],17,606105819),_,f,h[u+3],22,3250441966),g=n(g,_=n(_,f=n(f,m,g,_,h[u+4],7,4118548399),m,g,h[u+5],12,1200080426),f,m,h[u+6],17,2821735955),_,f,h[u+7],22,4249261313),g=n(g,_=n(_,f=n(f,m,g,_,h[u+8],7,1770035416),m,g,h[u+9],12,2336552879),f,m,h[u+10],17,4294925233),_,f,h[u+11],22,2304563134),g=n(g,_=n(_,f=n(f,m,g,_,h[u+12],7,1804603682),m,g,h[u+13],12,4254626195),f,m,h[u+14],17,2792965006),_,f,h[u+15],22,1236535329),g=r(g,_=r(_,f=r(f,m,g,_,h[u+1],5,4129170786),m,g,h[u+6],9,3225465664),f,m,h[u+11],14,643717713),_,f,h[u+0],20,3921069994),g=r(g,_=r(_,f=r(f,m,g,_,h[u+5],5,3593408605),m,g,h[u+10],9,38016083),f,m,h[u+15],14,3634488961),_,f,h[u+4],20,3889429448),g=r(g,_=r(_,f=r(f,m,g,_,h[u+9],5,568446438),m,g,h[u+14],9,3275163606),f,m,h[u+3],14,4107603335),_,f,h[u+8],20,1163531501),g=r(g,_=r(_,f=r(f,m,g,_,h[u+13],5,2850285829),m,g,h[u+2],9,4243563512),f,m,h[u+7],14,1735328473),_,f,h[u+12],20,2368359562),g=i(g,_=i(_,f=i(f,m,g,_,h[u+5],4,4294588738),m,g,h[u+8],11,2272392833),f,m,h[u+11],16,1839030562),_,f,h[u+14],23,4259657740),g=i(g,_=i(_,f=i(f,m,g,_,h[u+1],4,2763975236),m,g,h[u+4],11,1272893353),f,m,h[u+7],16,4139469664),_,f,h[u+10],23,3200236656),g=i(g,_=i(_,f=i(f,m,g,_,h[u+13],4,681279174),m,g,h[u+0],11,3936430074),f,m,h[u+3],16,3572445317),_,f,h[u+6],23,76029189),g=i(g,_=i(_,f=i(f,m,g,_,h[u+9],4,3654602809),m,g,h[u+12],11,3873151461),f,m,h[u+15],16,530742520),_,f,h[u+2],23,3299628645),g=a(g,_=a(_,f=a(f,m,g,_,h[u+0],6,4096336452),m,g,h[u+7],10,1126891415),f,m,h[u+14],15,2878612391),_,f,h[u+5],21,4237533241),g=a(g,_=a(_,f=a(f,m,g,_,h[u+12],6,1700485571),m,g,h[u+3],10,2399980690),f,m,h[u+10],15,4293915773),_,f,h[u+1],21,2240044497),g=a(g,_=a(_,f=a(f,m,g,_,h[u+8],6,1873313359),m,g,h[u+15],10,4264355552),f,m,h[u+6],15,2734768916),_,f,h[u+13],21,1309151649),g=a(g,_=a(_,f=a(f,m,g,_,h[u+4],6,4149444226),m,g,h[u+11],10,3174756917),f,m,h[u+2],15,718787259),_,f,h[u+9],21,3951481745),f=o(f,c),m=o(m,l),g=o(g,p),_=o(_,d);return(s(f)+s(m)+s(g)+s(_)).toLowerCase()}(n.token+"&"+s+"&"+a+"&"+o.data),c={jsv:"2.5.1",appKey:a,t:s,sign:u},l={data:o.data,ua:o.ua};Object.keys(o).forEach(function(e){void 0===c[e]&&void 0===l[e]&&"headers"!==e&&"ext_headers"!==e&&"ext_querys"!==e&&(c[e]=o[e])}),o.ext_querys&&Object.keys(o.ext_querys).forEach(function(e){c[e]=o.ext_querys[e]}),n.getJSONP?c.type="jsonp":n.getOriginalJSONP?c.type="originaljsonp":(n.getJSON||n.postJSON)&&(c.type="originaljson"),void 0!==o.valueType&&("original"===o.valueType?n.getJSONP||n.getOriginalJSONP?c.type="originaljsonp":(n.getJSON||n.postJSON)&&(c.type="originaljson"):"string"===o.valueType&&(n.getJSONP||n.getOriginalJSONP?c.type="jsonp":(n.getJSON||n.postJSON)&&(c.type="json"))),!0===n.useJsonpResultType&&"originaljson"===c.type&&delete c.type,n.dangerouslySetProtocol&&(i=n.dangerouslySetProtocol+":"+i),n.querystring=c,n.postdata=l,n.path=i}e()},l.prototype.__processUnitPrefix=function(e){e()};var w=0;l.prototype.__requestJSONP=function(e){function t(e){if(c&&clearTimeout(c),l.parentNode&&l.parentNode.removeChild(l),"TIMEOUT"===e)window[u]=function(){window[u]=void 0;try{delete window[u]}catch(e){}};else{window[u]=void 0;try{delete window[u]}catch(e){}}}var o=n(),r=this.params,a=this.options,s=r.timeout||2e4,u="mtopjsonp"+(r.jsonpIncPrefix||"")+ ++w,c=setTimeout(function(){e(a.timeoutErrMsg||"TIMEOUT::接口超时"),t("TIMEOUT")},s);a.querystring.callback=u;var l=document.createElement("script");return l.src=a.path+"?"+i(a.querystring)+"&"+i(a.postdata),l.async=!0,l.onerror=function(){t("ABORT"),e(a.abortErrMsg||"ABORT::接口异常退出")},window[u]=function(){a.results=Array.prototype.slice.call(arguments),t(),o.resolve()},function(e){(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.firstElementChild||document).appendChild(e)}(l),o.promise},l.prototype.__requestJSON=function(e){function o(e){p&&clearTimeout(p),"TIMEOUT"===e&&c.abort()}var r=n(),a=this.params,u=this.options,c=new t.XMLHttpRequest,l=a.timeout||2e4,p=setTimeout(function(){e(u.timeoutErrMsg||"TIMEOUT::接口超时"),o("TIMEOUT")},l);u.CDR&&s(x)&&(u.querystring.c=decodeURIComponent(s(x))),c.onreadystatechange=function(){if(4==c.readyState){var t,n,i=c.status;if(i>=200&&300>i||304==i){o(),t=c.responseText,n=c.getAllResponseHeaders()||"";try{(t=/^\s*$/.test(t)?{}:JSON.parse(t)).responseHeaders=n,u.results=[t],r.resolve()}catch(t){e("PARSE_JSON_ERROR::解析JSON失败")}}else o("ABORT"),e(u.abortErrMsg||"ABORT::接口异常退出")}};var d,f,m=u.path+"?"+i(u.querystring);u.getJSON?(d="GET",m+="&"+i(u.postdata)):u.postJSON&&(d="POST",f=i(u.postdata)),c.open(d,m,!0),c.withCredentials=!0,c.setRequestHeader("Accept","application/json"),c.setRequestHeader("Content-type","application/x-www-form-urlencoded");var g=a.ext_headers||a.headers;if(g)for(var _ in g)c.setRequestHeader(_,g[_]);return c.send(f),r.promise},l.prototype.__requestWindVane=function(){function e(e){i.results=[e],t.resolve()}var t=n(),r=this.params,i=this.options,a=r.data,s=r.api,u=r.v,c=i.postJSON?1:0,l=i.getJSON||i.postJSON||i.getOriginalJSONP?"originaljson":"";void 0!==r.valueType&&("original"===r.valueType?l="originaljson":"string"===r.valueType&&(l="")),!0===i.useJsonpResultType&&(l="");var p,d,f="https"===location.protocol?1:0,m=r.isSec||0,g=r.sessionOption||"AutoLoginOnly",_=r.ecode||0,h=r.ext_headers||{},y=r.ext_querys||{};p=2*(d=void 0===r.timer?void 0===r.timeout?2e4:parseInt(r.timeout):parseInt(r.timer)),!0===r.needLogin&&void 0===r.sessionOption&&(g="AutoLoginAndManualLogin"),void 0!==r.secType&&void 0===r.isSec&&(m=r.secType);var v={api:s,v:u,post:c+"",type:l,isHttps:f+"",ecode:_+"",isSec:m+"",param:JSON.parse(a),timer:d,sessionOption:g,ext_headers:h,ext_querys:y};return r.ttid&&!0===i.dangerouslySetWVTtid&&(v.ttid=r.ttid),Object.assign&&r.dangerouslySetWindvaneParams&&Object.assign(v,r.dangerouslySetWindvaneParams),o.windvane.call("MtopWVPlugin","send",v,e,e,p),t.promise},l.prototype.__requestAlipay=function(){var e=n(),o=this.params,r=this.options,i={apiName:o.api,apiVersion:o.v,needEcodeSign:"1"==o.ecode+"",usePost:!!r.postJSON};return a(o.data)||(o.data=JSON.parse(o.data)),i.data=o.data,o.ttid&&!0===r.dangerouslySetWVTtid&&(i.ttid=o.ttid),(r.getJSON||r.postJSON||r.getOriginalJSONP)&&(i.type="originaljson"),void 0!==o.valueType&&("original"===o.valueType?i.type="originaljson":"string"===o.valueType&&delete i.type),!0===r.useJsonpResultType&&delete i.type,Object.assign&&o.dangerouslySetAlipayParams&&Object.assign(i,o.dangerouslySetAlipayParams),t.AlipayJSBridge.call("mtop",i,function(t){r.results=[t],e.resolve()}),e.promise},l.prototype.__processRequest=function(e,t){var o=this;return f.then(function(){var e=o.options;if(e.H5Request&&(e.getJSONP||e.getOriginalJSONP))return o.__requestJSONP(t);if(e.H5Request&&(e.getJSON||e.postJSON))return o.__requestJSON(t);if(e.WindVaneRequest)return y?o.__requestAlipay(t):o.__requestWindVane(t);throw new Error("UNEXCEPT_REQUEST::错误的请求类型")}).then(e).then(function(){var e=o.options,t=(o.params,e.results[0]),n=t&&t.ret||[];t.ret=n,n instanceof Array&&(n=n.join(","));var r=t.c;e.CDR&&r&&function(e,t,o){var n=o||{};document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+t.replace(/[^+#$&\/:<-\[\]-}]/g,encodeURIComponent)+(n.domain?";domain="+n.domain:"")+(n.path?";path="+n.path:"")+(n.secure?";secure":"")+(n.httponly?";HttpOnly":"")}(x,r,{domain:e.pageDomain,path:"/"}),t.retType=n.indexOf("SUCCESS")>-1?_.SUCCESS:_.ERROR,e.retJson=t})},l.prototype.__sequence=function(e){var t=this,o=[],r=[];e.forEach(function e(i){if(i instanceof Array)i.forEach(e);else{var a,s=n(),u=n();o.push(function(){return s=n(),(a=i.call(t,function(e){return s.resolve(e),u.promise},function(e){return s.reject(e),u.promise}))&&(a=a.catch(function(e){s.reject(e)})),s.promise}),r.push(function(e){return u.resolve(e),a})}});for(var i,a=f;i=o.shift();)a=a.then(i);for(;i=r.pop();)a=a.then(i);return a};var k=function(e){e()},S=function(e){e()};l.prototype.request=function(e){var n=this;if(this.options=r(e||{},m),!d){var i="当前浏览器不支持Promise，请在windows对象上挂载Promise对象";throw o.mtop={ERROR:i},new Error(i)}var a=d.resolve([k,S]).then(function(e){var t=e[0],o=e[1];return n.__sequence([t,n.__processRequestMethod,n.__processRequestType,n.__processToken,n.__processRequestUrl,n.middlewares,n.__processRequest,o])}).then(function(){var e=n.options.retJson;return e.retType===_.SUCCESS?n.options.successCallback?void n.options.successCallback(e):d.resolve(e):d.reject(e)}).catch(function(e){var t;return e instanceof Error?(console.error(e.stack),t={ret:[e.message],stack:[e.stack],retJson:_.ERROR}):t="string"==typeof e?{ret:[e],retJson:_.ERROR}:void 0===e?n.options.retJson:e,o.mtop.errorListener&&o.mtop.errorListener({api:n.params.api,v:n.params.v,retJson:t}),n.options.failureCallback?void n.options.failureCallback(t):d.reject(t)});return this.__processRequestType(),n.options.H5Request&&(n.constructor.__firstProcessor||(n.constructor.__firstProcessor=a),k=function(e){n.constructor.__firstProcessor.then(e).catch(e)}),("get"===this.params.type&&"json"===this.params.dataType||"post"===this.params.type)&&(e.pageDomain=e.pageDomain||function(e){try{return".com"===e.substring(e.lastIndexOf("."))?e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1):(e.split(".")||[]).length<=3?e:e.split(".").slice(1).join(".")}catch(t){return e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1)}}(t.location.hostname),e.mainDomain!==e.pageDomain&&(e.maxRetryTimes=4,e.CDR=!0)),this.__requestProcessor=a,a},o.mtop=function(e){return new l(e)},o.mtop.request=function(e,t,o){var n={H5Request:e.H5Request,WindVaneRequest:e.WindVaneRequest,LoginRequest:e.LoginRequest,AntiCreep:e.AntiCreep,AntiFlood:e.AntiFlood,successCallback:t,failureCallback:o||t};return new l(e).request(n)},o.mtop.H5Request=function(e,t,o){return new l(e).request({H5Request:!0,successCallback:t,failureCallback:o||t})},o.mtop.middlewares=g,o.mtop.config=m,o.mtop.RESPONSE_TYPE=_,o.mtop.CLASS=l}(window,window.lib||(window.lib={})),function(e,t){function o(e){return e.preventDefault(),!1}function n(t,n){var r=Math.max,i=this,a=e.dpr||1,s=document.createElement("div"),u=document.documentElement.getBoundingClientRect(),c=r(u.width,window.innerWidth)/a,l=r(u.height,window.innerHeight)/a;s.style.cssText=["-webkit-transform:scale("+a+") translateZ(0)","-ms-transform:scale("+a+") translateZ(0)","transform:scale("+a+") translateZ(0)","-webkit-transform-origin:0 0","-ms-transform-origin:0 0","transform-origin:0 0","width:"+c+"px","height:"+l+"px","z-index:999999","position:"+(c>800?"fixed":"absolute"),"left:0","top:0px","background:"+(c>800?"rgba(0,0,0,.5)":"#FFF"),"display:none"].join(";");var p=document.createElement("div");p.style.cssText=["width:100%","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:0","top:0","font-size:16px","font-weight:bold","color:#333"].join(";"),p.innerText=t;var d=document.createElement("a");d.style.cssText=["display:block","position:absolute","right:0","top:0","height:52px","line-height:52px","padding:0 20px","color:#999"].join(";"),d.innerText="关闭";var f=document.createElement("iframe");f.style.cssText=["width:100%","height:100%","border:0","overflow:hidden"].join(";"),c>800&&(p.style.cssText=["width:370px","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:"+(c/2-185)+"px","top:40px","font-size:16px","font-weight:bold","color:#333"].join(";"),f.style.cssText=["position:absolute","top:92px","left:"+(c/2-185)+"px","width:370px","height:480px","border:0","background:#FFF","overflow:hidden"].join(";")),p.appendChild(d),s.appendChild(p),s.appendChild(f),s.className="J_MIDDLEWARE_FRAME_WIDGET",document.body.appendChild(s),f.src=n,d.addEventListener("click",function(){i.hide();var e=document.createEvent("HTMLEvents");e.initEvent("close",!1,!1),s.dispatchEvent(e)},!1),this.addEventListener=function(){s.addEventListener.apply(s,arguments)},this.removeEventListener=function(){s.removeEventListener.apply(s,arguments)},this.show=function(){document.addEventListener("touchmove",o,!1),s.style.display="block",window.scrollTo(0,0)},this.hide=function(){document.removeEventListener("touchmove",o),window.scrollTo(0,-u.top),s.parentNode&&s.parentNode.removeChild(s)}}if(!t||!t.mtop||t.mtop.ERROR)throw new Error("Mtop 初始化失败！");var r=e.Promise,i=t.mtop.CLASS,a=t.mtop.config,s=t.mtop.RESPONSE_TYPE;t.mtop.middlewares.push(function(e){var o=this,n=this.options,r=this.params;return e().then(function(){var e=n.retJson,i=e.ret,u=navigator.userAgent.toLowerCase(),c=u.indexOf("safari")>-1&&u.indexOf("chrome")<0&&u.indexOf("qqbrowser")<0;if(i instanceof Array&&(i=i.join(",")),(i.indexOf("SESSION_EXPIRED")>-1||i.indexOf("SID_INVALID")>-1||i.indexOf("AUTH_REJECT")>-1||i.indexOf("NEED_LOGIN")>-1)&&(e.retType=s.SESSION_EXPIRED,!n.WindVaneRequest&&(!0===a.LoginRequest||!0===n.LoginRequest||!0===r.needLogin))){if(!t.login)throw new Error("LOGIN_NOT_FOUND::缺少lib.login");if(!0!==n.safariGoLogin||!c||"taobao.com"===n.pageDomain)return t.login.goLoginAsync().then(function(){return o.__sequence([o.__processToken,o.__processRequestUrl,o.__processUnitPrefix,o.middlewares,o.__processRequest])}).catch(function(e){throw"CANCEL"===e?new Error("LOGIN_CANCEL::用户取消登录"):new Error("LOGIN_FAILURE::用户登录失败")});t.login.goLogin()}})}),t.mtop.loginRequest=function(e,t,o){return new i(e).request({LoginRequest:!0,H5Request:!0,successCallback:t,failureCallback:o||t})},t.mtop.antiFloodRequest=function(e,t,o){return new i(e).request({AntiFlood:!0,successCallback:t,failureCallback:o||t})},t.mtop.middlewares.push(function(e){var t=this.options;return this.params,!0!==t.H5Request||!0!==a.AntiFlood&&!0!==t.AntiFlood?void e():e().then(function(){var e=t.retJson,o=e.ret;o instanceof Array&&(o=o.join(",")),o.indexOf("FAIL_SYS_USER_VALIDATE")>-1&&e.data.url&&(t.AntiFloodReferer?location.href=e.data.url.replace(/(http_referer=).+/,"$1"+t.AntiFloodReferer):location.href=e.data.url)})}),t.mtop.antiCreepRequest=function(e,t,o){return new i(e).request({AntiCreep:!0,successCallback:t,failureCallback:o||t})},t.mtop.middlewares.push(function(t){var o=this,i=this.options,s=this.params;return!1!==i.AntiCreep&&(i.AntiCreep=!0),!0!==s.forceAntiCreep&&!0!==i.H5Request||!0!==a.AntiCreep&&!0!==i.AntiCreep?void t():t().then(function(){var t=i.retJson,a=t.ret;if(a instanceof Array&&(a=a.join(",")),(a.indexOf("RGV587_ERROR::SM")>-1||a.indexOf("ASSIST_FLAG")>-1)&&t.data.url){var u="_m_h5_smt",c=function(e){var t=new RegExp("(?:^|;\\s*)"+e+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return t?t[1]:void 0}(u),l=!1;if(!0===i.saveAntiCreepToken&&c)for(var p in c=JSON.parse(c))s[p]&&(l=!0);if(!0===i.saveAntiCreepToken&&c&&!l){for(var p in c)s[p]=c[p];return o.__sequence([o.__processToken,o.__processRequestUrl,o.__processUnitPrefix,o.middlewares,o.__processRequest])}return new r(function(r,a){function c(){p.removeEventListener("close",c),e.removeEventListener("message",l),a("USER_INPUT_CANCEL::用户取消输入")}function l(t){var n;try{n=JSON.parse(t.data)||{}}catch(e){}if(n&&"child"===n.type){var d;p.removeEventListener("close",c),e.removeEventListener("message",l),p.hide();try{for(var f in"string"==typeof(d=JSON.parse(decodeURIComponent(n.content)))&&(d=JSON.parse(d)),d)s[f]=d[f];!0===i.saveAntiCreepToken?(document.cookie=u+"="+JSON.stringify(d)+";",e.location.reload()):o.__sequence([o.__processToken,o.__processRequestUrl,o.__processUnitPrefix,o.middlewares,o.__processRequest]).then(r)}catch(e){a("USER_INPUT_FAILURE::用户输入失败")}}}var p=new n("",t.data.url);p.addEventListener("close",c,!1),e.addEventListener("message",l,!1),p.show()})}})})}(window,window.lib||(window.lib={})),module.exports=window.lib.mtop},function(module,exports,e){Object.defineProperty(exports,"__esModule",{value:!0});var t=Object.assign||function(e){for(var t,o=1;o<arguments.length;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o=function(){function e(e,t){for(var o,n=0;n<t.length;n++)(o=t[n]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),n=e(0),r=f(e(1)),i=f(e(3)),a=f(e(33)),s=e(14),u=f(e(13)),c=f(e(34)),l=e(36),p=f(e(37)),d=f(e(39));function f(e){return e&&e.__esModule?e:{default:e}}var m=c.default.newInstance(),g=function(e){function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return o.goTargetUrl=function(e,t,n){var r=o.state.mds,i={url:e,nid:t||0,widgetId:r.widgetId,moduleName:r.moduleName,target:n||null};o.pageUtils.goTargetUrl&&o.pageUtils.goTargetUrl(i)},o.onClickOver=function(e){var t=o.state,n=t.isLogin,r=t.gdc,i=r.translation,a=void 0===i?{}:i,c=r.translate,p=void 0===c?{}:c,d=r.locale,f=r.currency,g=o.props.dataSource,_=void 0===g?[]:g,h="//login.aliexpress.com/?return_url="+location.href;if(h=(0,s.switchLinkURL)(h),n){var y=e.campaignDetails&&e.campaignDetails[0]&&e.campaignDetails[0].features&&e.campaignDetails[0].features.encryptedString,v=a["module.mobile.shopCode.toastText"]||p["module.mobile.shopCode.toastText"]||"successfully";(0,l.click)({ae_object_value:"coupon_promotion_id="+y+";coupon_type=PLATFORM",ae_object_type:"coupon",ae_button_type:"coupon_component",st_page_id:window.dmtrack_pageid});var x={asac:e.asac,bizExtension:JSON.stringify({encryptedString:y,bizIdentity:"shop",sourceChannel:"shop_homepage"}),_lang:d,_currency:f};u.default.request({api:"mtop.ae.ump.piggybank.couponCode.send",v:"1.0",dataType:"originaljsonp",data:x},function(t){if(t&&t.data&&t.data.resultFlag){(0,l.click)({ae_object_value:"coupon_promotion_id="+y+";coupon_type=PLATFORM;error_code=success",ae_object_type:"coupon",ae_button_type:"coupon_get_result",st_page_id:window.dmtrack_pageid}),m.success(v);var n=_.map(function(o){return e.campaignCode===o.campaignCode&&(o.collected=!0,o.bizExtension&&t.data.module&&t.data.module.couponCode&&(o.bizExtension.couponCode=t.data.module.couponCode,o.bizExtension.codeScope="public")),o});o.props.updateCouponData(n)}else(0,l.click)({ae_object_value:"coupon_promotion_id="+y+";coupon_type=PLATFORM;error_code="+t.data.resultCode,ae_object_type:"coupon",ae_button_type:"coupon_get_result",st_page_id:window.dmtrack_pageid}),m.error(t.data&&t.data.resultMSG)},function(e){if((0,l.click)({ae_object_value:"coupon_promotion_id="+y+";coupon_type=PLATFORM;error_code="+e,ae_object_type:"coupon",ae_button_type:"coupon_get_result",st_page_id:window.dmtrack_pageid}),e.ret){var t=e.ret[0].split("::")[1];m.error(t)}else m.error("system is error, please try again")})}else window.location.href=h},o.next=function(){var e=(new Date).getTime(),t=o.state,n=t.activeIndex,r=t.nextClickTime,i=o.props.dataSource,a=void 0===i?[]:i,s=n+3,u=!1;a.length-s<3&&(s=a.length-3,u=!0);var c=0;r&&e-r<500&&(c=300),setTimeout(function(){o.setState({activeIndex:s,nextDisabled:u,nextClickTime:e,prevDisabled:!1})},c)},o.prev=function(){var e=(new Date).getTime(),t=o.state,n=t.activeIndex,r=t.preClickTime,i=n-3,a=!1;i<0&&(a=!0,i=0);var s=0;r&&e-r<500&&(s=300),setTimeout(function(){o.setState({activeIndex:i,prevDisabled:a,preClickTime:e,nextDisabled:!1})},s)},o.renderNextArrow=function(){var e=o.state.nextDisabled;return(0,n.createElement)(r.default,{style:t({},d.default.nextCon,{cursor:e?"not-allowed":"pointer"}),onClick:e?null:o.next},(0,n.createElement)(i.default,{style:d.default.arrow,source:{uri:e?"//ae01.alicdn.com/kf/H53b0117f3bc0462087d79c5467fc0e8eC.png":"//ae01.alicdn.com/kf/H1ae6b346a06441d7ac7b26b5702efea9M.png"}}))},o.renderPrevArrow=function(){var e=o.state.prevDisabled;return(0,n.createElement)(r.default,{style:t({},d.default.prevCon,{cursor:e?"not-allowed":"pointer"}),onClick:e?null:o.prev},(0,n.createElement)(i.default,{style:d.default.arrow,source:{uri:e?"//ae01.alicdn.com/kf/H2c0f139f44264c2787f78eca23889b305.png":"//ae01.alicdn.com/kf/H6dc44eadede646018fced6a726ff2983K.png"}}))},o.pageUtils=e.pageUtils,o.fetch=e.pageUtils.fetch,o.sliderWidth=0,o.state={mds:e.mds||{},gdc:e.gdc||{},isLogin:o.props.isLogin,activeIndex:0,prevDisabled:!0,nextDisabled:!1,nextClickTime:null,preClickTime:null},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,n.Component),o(c,[{key:"componentWillReceiveProps",value:function(e){this.setState({isLogin:e.isLogin})}},{key:"render",value:function(){var e=this,o=this.props,i=o.dataSource,s=void 0===i?[]:i,u=o.translation,c=o.isFollowed,l=this.state,f=l.activeIndex,m=void 0===f?0:f,g=(l.mds,l.gdc),_=(l.show,s.length);if(0===_)return null;var h=_>3,y=h?{width:"952px"}:{display:"flex",flexDirection:"row"};return(0,n.createElement)(r.default,{style:t({},d.default.storeContainer,y)},h?(0,n.createElement)(a.default,{infinite:!1,arrows:!1,autoplay:!1,dots:!1,slidesToShow:3,slidesToScroll:3,activeIndex:m,defaultActiveIndex:0,style:d.default.slider},s.map(function(t,o){return(0,n.createElement)(r.default,{style:{width:"auto"}},(0,n.createElement)(p.default,{isFollowed:c,gdc:g,isLast:o===_-1,index:o,showSlider:h,width:200,onClickOver:e.onClickOver,data:t,translation:u}))})):s.map(function(t,o){return(0,n.createElement)(p.default,{isFollowed:c,gdc:g,isLast:o===_-1,length:s.length,onClickOver:e.onClickOver,data:t,translation:u})}),h?this.renderNextArrow():null,h?this.renderPrevArrow():null)}}]),c}();exports.default=g,module.exports=exports.default},function(module,exports){module.exports=r},function(module,exports,e){Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function e(e,t){for(var o,n=0;n<t.length;n++)(o=t[n]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),o=e(0),n=a(e(1)),r=a(e(15)),i=a(e(35));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}var u=0,c=Date.now();function l(){return"rcNotification_"+c+"_"+u++}var p=function(e){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={data:[]},t.add=t.add.bind(t),t.remove=t.remove.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o.Component),t(a,[{key:"add",value:function(e){console.log("msg123","add"),this.setState({data:[].concat(s(this.state.data),[e])});var t=this;setTimeout(function(){return t.remove(e.key)},2e3)}},{key:"remove",value:function(e){console.log("msg123","remove");var t=this.state.data.filter(function(t){return t.key!=e});this.setState({data:[].concat(s(t))})}},{key:"render",value:function(){return(0,o.createElement)(n.default,null,this.state.data.map(function(e){return e.type,(0,o.createElement)(r.default,{style:i.default.toastContainer,key:e.key},e.msg)}))}}]),a}(),d=void 0;p.newInstance=function(){if(d)return d;var e=document.createElement("div");document.body.appendChild(e),console.log("创建",e);var t=(0,o.render)((0,o.createElement)(p,null),e);return setTimeout(function(){var n=(0,o.render)((0,o.createElement)(p,null),e);t=n,console.log("message",t)},2e3),console.log("外层message",t),d={success:function(e){console.log(t,e),t&&t.add({type:"success",msg:e,key:l()})},warning:function(e){t&&t.add({type:"warning",msg:e,key:l()})},error:function(e){t&&t.add({type:"error",msg:e,key:l()})},component:t}},exports.default=p,module.exports=exports.default},function(module,exports){module.exports={toastContainer:{backgroundColor:"rgba(0,0,0,0.6)",boxSizing:"border-box",maxWidth:"336px",color:"rgb(255,255,255)",paddingTop:"20px",paddingRight:"60px",paddingBottom:"20px",paddingLeft:"60px",position:"fixed",left:"50%",bottom:"50%",fontSize:"14px",lineHeight:"24px",fontWeight:"600",borderRadius:"4px",textAlign:"center",transitionProperty:"width,height,top,bottom,left,right,backgroundColor,opacity,transform",transitionTimingFunction:"ease-in-out",transitionDuration:"400ms",transitionDelay:"0ms",transform:"translateX(-50%)",zIndex:9999}}},function(module,exports){function e(e){try{var t=Object.keys(e.params).map(function(t){return t+"="+e.params[t]}).join("&");window.goldlog.record(e.path,e.event,"st_page_id="+window.dmtrack_pageid+"&"+t,"GET")}catch(t){console.log("Data track ("+e.event+") error:",t)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.click=function(t){e({path:"/ae.pc_click.statweb_ae_click",event:"CLK",params:t})},exports.exposure=function(t){e({path:"/ae.pc_ctr.statweb_ae_ctr",event:"EXP",params:t})}},function(module,exports,e){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=Object.assign||function(e){for(var t,o=1;o<arguments.length;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o=function(){function e(e,t){for(var o,n=0;n<t.length;n++)(o=t[n]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),n=e(0),r=s(e(1)),i=s(e(15)),a=(s(e(3)),s(e(38)));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function s(){var e,t,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=o=u(this,(e=s.__proto__||Object.getPrototypeOf(s)).call.apply(e,[this].concat(r))),o.goTargetUrl=function(e,t,n){var r=o.state.mds,i={url:e,nid:t||0,widgetId:r.widgetId,moduleName:r.moduleName,target:n||null};o.pageUtils.goTargetUrl&&o.pageUtils.goTargetUrl(i)},o.getExpProps=function(e){return{exp_trigger:"",st_page_id:window.dmtrack_pageid,exp_type:"coupon_exposure",exp_condition:"coupon_promotion_id="+e+";coupon_type=STORE"}},o.receiveCoupon=function(e){o.props.onClickOver(e)},u(o,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,n.Component),o(s,[{key:"render",value:function(){var e=this,o=this.props,s=o.data,u=void 0===s?{}:s,c=o.isLast,l=u.newTips;return(0,n.createElement)(r.default,t({key:u.campaignCode},this.getExpProps(u.campaignCode),{style:t({},a.default.container,{marginRight:c?0:"8px"})}),(0,n.createElement)(i.default,{style:a.default.coupons}," ",l.sellerCouponDenominationInfo),(0,n.createElement)(r.default,{style:a.default.overPriceContainer},(0,n.createElement)(i.default,{numberOfLines:2,style:a.default.overPrice},l.sellerCouponInfoCopy,l.sellerCouponExplainCopy)),(0,n.createElement)(i.default,{style:a.default.fansSingle},l.sellerCouponValidCopy),(0,n.createElement)(r.default,{style:a.default.empty}),(0,n.createElement)(r.default,{style:a.default.lastLine},u.bizExtension&&"public"===u.bizExtension.codeScope?(0,n.createElement)(r.default,{style:a.default.publicCode},u.bizExtension.couponCode):null,(0,n.createElement)(r.default,{style:u.collected?a.default.collectedBtn:a.default.getCouponsBtn,onClick:function(){return e.receiveCoupon(u)}},(0,n.createElement)(i.default,{numberOfLines:1,style:u.collected?a.default.collectedText:a.default.getCouponsBtnText},u.collectible&&!u.collected?l.sellerCouponActionCopy:l.sellerCouponActionCopyCollected))))}}]),s}();exports.default=c,module.exports=exports.default},function(module,exports){module.exports={container:{width:"312px",backgroundColor:"rgb(255,244,229)",borderRadius:"5px",marginRight:"8px",float:"left",cursor:"pointer",overflow:"hidden",position:"relative",display:"flex",flexDirection:"column",paddingTop:"10px",paddingRight:"16px",paddingBottom:"5px",paddingLeft:"16px"},overPriceContainer:{textAlign:"left",textOverflow:"ellipsis",overflow:"hidden"},coupons:{fontSize:"24px",color:"rgb(0,0,0)",lineHeight:"29px",fontWeight:"700",opacity:.9},overPrice:{fontSize:"13px",color:"rgb(0,0,0)",opacity:.9,textAlign:"left",overflow:"hidden",textOverflow:"ellipsis"},fansSingle:{height:"16px",fontFamily:"SFProDisplay-Regular",fontSize:"12px",marginTop:"4px",color:"rgb(127,121,114)",lineHeight:"16px"},lastLine:{display:"block",height:"36px",marginTop:"6px",position:"absolute",bottom:4,width:"280px"},empty:{height:"36px"},privateCodeImage:{position:"absolute",top:"4px",width:"140px",borderRadius:"2px"},getCouponsBtn:{height:"29px",minWidth:"100px",maxWidth:"126px",paddingTop:0,paddingRight:"12px",paddingBottom:0,paddingLeft:"12px",backgroundColor:"rgb(248,47,46)",borderRadius:"14.4px",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",float:"right"},getCouponsBtnText:{fontWeight:"700",fontSize:"14px",color:"rgb(255,255,255)",textAlign:"center",lineHeight:"29px",overflow:"hidden",textOverflow:"ellipsis"},publicCode:{position:"absolute",top:"4px",height:"23px",paddingTop:0,paddingRight:"13px",paddingBottom:0,paddingLeft:"13px",lineHeight:"21px",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",maxWidth:"140px",backgroundColor:"rgb(255,255,255)",borderWidth:"0.6px",borderStyle:"dashed",borderColor:"rgba(0,0,0,0.5)",borderRadius:"2.4px",fontSize:"14px",color:"rgba(0,0,0,0.9)",fontWeight:"700"},collectedBtn:{maxWidth:"126px",backgroundColor:"transparent",marginTop:"3px",float:"right"},collectedText:{opacity:.5,fontSize:"14px",marginTop:"3px",fontWeight:"700",color:"rgb(0,0,0)",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis"}}},function(module,exports){module.exports={storeContainer:{position:"relative",overflow:"hidden"},slider:{marginRight:"-8px"},nextCon:{position:"absolute",right:"0px",top:"30px",cursor:"pointer"},prevCon:{position:"absolute",left:"0px",top:"30px",cursor:"pointer"},arrow:{width:"36px",height:"64px"}}},function(module,exports){module.exports={wrapper:{width:"1200px",marginTop:0,marginRight:"auto",marginBottom:0,marginLeft:"auto",fontFamily:"Open Sans",display:"flex",flexDirection:"row",justifyContent:"center",overflow:"hidden"},title:{fontSize:"14px",color:"rgb(255,0,0)"},pic:{width:1200},defaultImage:{width:1200},infoCon:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginBottom:"32px"}}},function(module,exports,e){Object.defineProperty(exports,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t,o=1;o<arguments.length;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},n=function(){function e(e,t){for(var o,n=0;n<t.length;n++)(o=t[n]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=e(0),i=p(e(1)),a=p(e(3)),s=p(e(16)),u=p(e(13)),c=p(e(32)),l=p(e(40));function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function p(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,e));return t.goTargetUrl=function(e,o,n){var r=t.state,i=r.mds,a=(r.gdc,{url:e,nid:o||0,widgetId:i.widgetId,moduleName:i.moduleName,target:n||null});t.pageUtils.goTargetUrl&&t.pageUtils.goTargetUrl(a)},t.getCodeList=function(){var e=t.state,o=e.gdc,n=e.mds,r=o.sellerId,i=void 0===r?"":r,a=o.locale,s=void 0===a?"en_US":a,c=o.currency,l=void 0===c?"USD":c,p=o.country,d=void 0===p?"US":p,f=n.moduleData,m=void 0===f?{}:f;if("custom"===m.shopSignSelected&&m.shopCouponDefine&&m.shopCouponDefine.length>0)t.getShowByActivityId(i,m.shopCouponDefine,{_lang:s,_currency:l},d);else{var g={itemClusters:JSON.stringify([{seller:{id:i}}]),displayScenes:JSON.stringify([{scene:"common",subScene:"common"}]),checkRuleOptions:JSON.stringify({checkUnAcquirableCoupon:!1,shipTo:d}),returnAsac:!0,returnEncryptId:!1,appType:1,bizIdentity:"shop",sourceChannel:"shop_homepage",_lang:s,_currency:l};u.default.request({api:"mtop.alibaba.ae.ump.display.business.client.show4MultiScenes",v:"1.0",data:g,dataType:"originaljsonp"},function(e){if(e&&e.data&&e.data.module&&e.data.module.shopCampaignClusterMap){var o=e.data.module.shopCampaignClusterMap,n=[];Object.keys(o).forEach(function(e){return n=o[e]}),n=t.getNewData(n.campaigns||[]),t.setState({showDataStatus:!0,couponList:n})}},function(e){console.log(e)})}},t.getShowByActivityId=function(e,n,r,i){var a=o({itemCluster:JSON.stringify({seller:{id:e}}),activityIds:n,bizIdentity:"shop",sourceChannel:"shop_homepage",returnAsac:!0,appType:1},r);u.default.request({api:"mtop.alibaba.ae.ump.display.business.client.showById4All",v:"1.0",data:a,dataType:"originaljsonp"},function(e){if(e&&e.data&&e.data.module&&e.data.module.campaigns){var o=e.data.module.campaigns;o=t.getSortNewList(o,n,i),o=t.getNewData(o),t.setState({couponList:o,showDataStatus:!0})}},function(e){console.error(JSON.stringify(e))})},t.getNewData=function(e){return e&&e.map(function(e){var t={};return e.tips&&e.tips.forEach(function(e){t[e.key]=e.tips}),e.newTips=t,e})},t.getSortNewList=function(e,t,o){var n=[];return t.split(",").forEach(function(t){e.forEach(function(e){if(e.campaignId+""==t+""){var r=(new Date).getTime(),i=(e.effectiveTime&&e.effectiveTime.endTimeTimestamp)>r,a=(e.effectiveTime&&e.effectiveTime.startTimeTimestamp)>r,s=e.campaignDetails&&e.campaignDetails[0]&&e.campaignDetails[0].conditions,u=null,c=[];s&&s.forEach(function(e){"b_countryRangeType"===e.operationKey&&(u=e.countryRangeType),"ae_countryList"===e.operationKey&&(c=e.countries)});var l=!0;u&&"shipTo"===u?l=-1!==c.indexOf(o):"notin_shipTo"===u&&(l=-1===c.indexOf(o)),i&&!a&&l&&n.push(e)}})}),n},t.getLogin=function(){s.default.isLoggedIn()&&t.setState({isLogin:!0})},t.updateCouponData=function(e){t.setState({couponList:e})},t.changeIsHavePromoteSingleBannerModule=function(){document.querySelector(".ae-pc-promoteSingleBanner-module")||setTimeout(function(){document.querySelector(".ae-pc-promoteSingleBanner-module")||t.setState({isHaveBannerModule:!1})},250)},t.pageUtils=e.pageUtils,t.state={showDataStatus:!1,showNoDataStatus:!0,mds:t.props.mds||{},gdc:t.props.gdc||{},dataSource:[],isLogin:!1,couponList:[],isHaveBannerModule:!0,dialogProps:{visible:!1,content:"",isSuccess:!0},noSelectCoupon:!1},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,r.Component),n(p,[{key:"componentWillMount",value:function(){this.getLogin()}},{key:"componentDidMount",value:function(){var e=this.state.mds.moduleData;e&&"{}"!==JSON.stringify(e)&&this.getCodeList(),this.changeIsHavePromoteSingleBannerModule()}},{key:"render",value:function(){var e=this.state,n=e.showDataStatus,s=e.showNoDataStatus,u=e.mds,p=e.gdc,d=e.isLogin,f=e.couponList,m=void 0===f?[]:f,g=e.isHaveBannerModule,_=p.preView,h=p.translation,y=void 0===h?"{}":h;y="object"===(void 0===y?"undefined":t(y))?y:JSON.parse(y);var v=1==_||"true"==_?"0":"-144px";g||(v="48px");var x=o({},l.default.wrapper,{marginTop:v});return n&&m.length>0?(0,r.createElement)(i.default,{style:x},(0,r.createElement)(i.default,{style:l.default.infoCon},(0,r.createElement)(c.default,{translation:y,isLogin:d,pageUtils:this.pageUtils,gdc:p,mds:u,updateCouponData:this.updateCouponData,dataSource:m}))):!s||"true"!==_&&!0!==_?null:(0,r.createElement)(a.default,{style:o({},l.default.defaultImage,{width:u.defaultImageWidth||"100%",height:u.defaultImageHeight||"auto"}),source:{uri:u.defaultImage},lazyload:!1})}}]),p}();exports.default=d,module.exports=exports.default}])});